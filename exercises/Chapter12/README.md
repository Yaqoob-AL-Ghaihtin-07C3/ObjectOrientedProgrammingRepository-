# تمارين محلولة من الفصل الثاني عشر exercises/Chapter12 من كتاب Object-Oriented-Programming_OOP_C++

يحتوي هذا الفصل على تمارين برمجية من الكتاب من الفصل الثاني عشر (exercises/Chapter12) من كتاب Object-Oriented-Programming_OOP_C++.

---

## Chapter 12: File Input/Output Operations in C++

This chapter covers file handling in C++, demonstrating how to read from and write to files using streams. It includes binary file operations, command-line arguments, file copying, and file size determination.

### Code Files:

| #   | File Name                                     | Description                                                                                             | Input         | Output        | Topic                    |
| --- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------- | ------------- | ------------------------ |
| 1   | [Exercises12_1.cpp](Exercises12_1.cpp)        | Writes and reads Distance objects to/from a binary file using fstream with append mode.                | مسافات من المستخدم | قراءة المسافات من الملف | الملفات الثنائية، القراءة والكتابة |
| 2   | [Exercises12_2.cpp](Exercises12_2.cpp)        | Imitates the COPY command by copying one text file to another using command-line arguments.            | اسمي ملفين عبر سطر الأوامر | ملف منسوخ     | معالجة الملفات النصية، وسائط سطر الأوامر |
| 3   | [Exercises12_3.cpp](Exercises12_3.cpp)        | Displays the size of a file in bytes by seeking to the end and checking the position.                  | اسم ملف عبر سطر الأوامر | حجم الملف بالبايت | التحرك في الملفات، تحديد الحجم |

### تفاصيل كل تمرين:

#### 1. [Exercises12_1.cpp](Exercises12_1.cpp) - التعامل مع الملفات الثنائية
- **الوظيفة**: كتابة وقراءة كائنات `Distance` من وإلى ملف ثنائي
- **المدخلات**: مسافات من المستخدم (أقدام وبوصات)
- **المخرجات**: عرض جميع المسافات المخزنة في الملف
- **المفاهيم**: 
  - فتح الملفات بالوضع الثنائي (`ios::binary`)
  - الوضع المختلط (`ios::app | ios::out | ios::in`)
  - الكتابة الثنائية باستخدام `write((char*)&dist, sizeof(dist))`
  - القراءة الثنائية باستخدام `read((char*)&dist, sizeof(dist))`
  - التحرك في الملف باستخدام `seekg(0)`
  - التحقق من نهاية الملف باستخدام `eof()`

#### 2. [Exercises12_2.cpp](Exercises12_2.cpp) - نسخ الملفات النصية
- **الوظيفة**: محاكاة أمر `COPY` في نظام التشغيل لنسخ محتويات ملف نصي
- **المدخلات**: اسمي ملفين عبر وسائط سطر الأوامر (`argv[1]`, `argv[2]`)
- **المخرجات**: ملف جديد يحتوي على نسخة طبق الأصل من الملف الأصلي
- **المفاهيم**:
  - وسائط سطر الأوامر (`argc`, `argv`)
  - التحقق من عدد الوسائط (`argc != 3`)
  - فتح ملفات نصية للإدخال (`ifstream`) والإخراج (`ofstream`)
  - قراءة وكتابة المحتوى حرفاً بحرف (`get()`, `put()`)
  - معالجة أخطاء فتح الملفات

#### 3. [Exercises12_3.cpp](Exercises12_3.cpp) - تحديد حجم الملف
- **الوظيفة**: حساب وإظهار حجم الملف بالبايت
- **المدخلات**: اسم ملف عبر وسيط سطر الأوامر
- **المخرجات**: حجم الملف بالبايت
- **المفاهيم**:
  - التحرك لنهاية الملف باستخدام `seekg(0, ios::end)`
  - الحصول على الموضع الحالي باستخدام `tellg()`
  - فتح الملفات للقراءة فقط
  - استخدام `cerr` لرسائل الخطأ
  - الخروج من البرنامج مع كود خطأ باستخدام `exit(-1)`

---

## الفصل الثاني عشر: عمليات إدخال وإخراج الملفات في لغة C++

يغطي هذا الفصل التعامل مع الملفات في لغة C++، موضحاً كيفية القراءة من والكتابة إلى الملفات باستخدام الدفق (streams). يتضمن عمليات الملفات الثنائية، وسائط سطر الأوامر، نسخ الملفات، وتحديد حجم الملفات.

### ملفات الأكواد:

| #   | اسم الملف                                     | الوصف                                                                                                   | المدخلات      | المخرجات       | الموضوع                    |
| --- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------- | ------------- | ------------------------ |
| 1   | [Exercises12_1.cpp](Exercises12_1.cpp)        | يكتب ويقرأ كائنات المسافة من/إلى ملف ثنائي باستخدام fstream مع وضع الإلحاق.                            | مسافات من المستخدم | قراءة المسافات من الملف | الملفات الثنائية، القراءة والكتابة |
| 2   | [Exercises12_2.cpp](Exercises12_2.cpp)        | يحاكي أمر COPY بنسخ ملف نصي إلى ملف آخر باستخدام وسائط سطر الأوامر.                                    | اسمي ملفين عبر سطر الأوامر | ملف منسوخ     | معالجة الملفات النصية، وسائط سطر الأوامر |
| 3   | [Exercises12_3.cpp](Exercises12_3.cpp)        | يعرض حجم الملف بالبايت بالتحرك إلى النهاية والتحقق من الموضع.                                          | اسم ملف عبر سطر الأوامر | حجم الملف بالبايت | التحرك في الملفات، تحديد الحجم |

### شرح مفصل لكل تمرين:

#### 1. [Exercises12_1.cpp](Exercises12_1.cpp) - التعامل مع الملفات الثنائية
- **ما يفعله البرنامج**: يخزن ويسترجع بيانات كائنات من ملف ثنائي
- **كيف يعمل**: 
  1. يفتح ملف "DIST.DAT" بوضع ثنائي مختلط (قراءة، كتابة، إلحاق)
  2. يأخذ مسافات من المستخدم ويحولها إلى كائنات `Distance`
  3. يكتب كل كائن إلى الملف باستخدام `write()`
  4. بعد الانتهاء من الإدخال، يعود إلى بداية الملف بـ `seekg(0)`
  5. يقرأ ويعرض جميع المسافات المخزنة
  6. يتعرف على نهاية الملف باستخدام `eof()`
- **الغرض التعليمي**: فهم التعامل مع الملفات الثنائية وحفظ/استرجاع الكائنات

#### 2. [Exercises12_2.cpp](Exercises12_2.cpp) - نسخ الملفات النصية
- **ما يفعله البرنامج**: ينشئ نسخة طبق الأصل من ملف نصي
- **كيف يعمل**: 
  1. يتحقق من عدد وسائط سطر الأوامر (`argc` يجب أن يكون 3)
  2. يفتح الملف المصدر (`argv[1]`) للقراءة
  3. يفتح الملف الهدف (`argv[2]`) للكتابة
  4. يقرأ الملف المصدر حرفاً بحرف باستخدام `get()`
  5. يكتب كل حرف إلى الملف الهدف باستخدام `put()`
  6. يستمر حتى نهاية الملف
  7. يتعامل مع أخطاء فتح الملفات ويطبع رسائل خطأ مناسبة
- **الغرض التعليمي**: فهم وسائط سطر الأوامر والنسخ الأساسي للملفات

#### 3. [Exercises12_3.cpp](Exercises12_3.cpp) - تحديد حجم الملف
- **ما يفعله البرنامج**: يحسب حجم الملف دون قراءة محتواه
- **كيف يعمل**: 
  1. يتحقق من وجود وسيط سطر أوامر واحد (اسم الملف)
  2. يفتح الملف للقراءة
  3. يتحرك مباشرة إلى نهاية الملف باستخدام `seekg(0, ios::end)`
  4. يستعلم عن الموضع الحالي (وهو حجم الملف بالبايت) باستخدام `tellg()`
  5. يعرض حجم المفح
  6. يتعامل مع أخطاء فتح الملفات والإدخال غير الصحيح
- **الغرض التعليمي**: فهم كيفية التحرك في الملفات والحصول على معلومات عنها

### المفاهيم الرئيسية في هذا الفصل:

1. **أنواع الدفق (Streams)**:
   - `ifstream`: للقراءة من الملفات (Input File Stream)
   - `ofstream`: للكتابة إلى الملفات (Output File Stream)
   - `fstream`: للقراءة والكتابة (File Stream)

2. **أنماط فتح الملفات (File Open Modes)**:
   - `ios::in`: للقراءة
   - `ios::out`: للكتابة
   - `ios::app`: للإلحاق (Append)
   - `ios::binary`: للوضع الثنائي
   - `ios::ate`: التحرك إلى النهاية عند الفتح

3. **عمليات القراءة/الكتابة**:
   - `read()`: قراءة بيانات ثنائية
   - `write()`: كتابة بيانات ثنائية
   - `get()`: قراءة حرف
   - `put()`: كتابة حرف

4. **التحرك في الملفات (File Positioning)**:
   - `seekg()`: تحرك مؤشر القراءة (get)
   - `seekp()`: تحرك مؤشر الكتابة (put)
   - `tellg()`: الحصول على موضع مؤشر القراءة
   - `tellp()`: الحصول على موضع مؤشر الكتابة

5. **وسائط سطر الأوامر (Command-line Arguments)**:
   - `argc`: عدد الوسائط
   - `argv[]`: مصفوفة السلاسل النصية للوسائط

### الفرق بين الملفات النصية والثنائية:

| الجانب           | الملفات النصية                  | الملفات الثنائية                  |
|------------------|--------------------------------|-----------------------------------|
| **التمثيل**      | نص مقروء                      | بيانات خام                       |
| **التحويلات**    | تتم تلقائياً                  | لا توجد تحويلات                  |
| **نهاية السطر**  | `\n` → `\r\n` (Windows)       | كما هو مخزن                      |
| **الكفاءة**      | أقل كفاءة                     | أكثر كفاءة                       |
| **الاستخدام**    | نصوص، إعدادات                 | صور، صوت، فيديو، كائنات         |

### أخطاء شائعة في التعامل مع الملفات:

1. **عدم التحقق من فتح الملف**: يؤدي إلى سلوك غير متوقع
2. **عدم إغلاق الملفات**: قد يؤدي إلى فقدان بيانات
3. **عدم التحقق من `eof()`**: قراءة بعد نهاية الملف
4. **عدم استخدام الوضع الثنائي للبيانات الثنائية**: تلف البيانات
5. **نسيان `seekg()` بعد الكتابة**: القراءة من موضع خاطئ

### تطبيقات عملية:

1. **أنظمة قواعد البيانات**: تخزين واسترجاع السجلات
2. **النسخ الاحتياطي**: نسخ الملفات والمجلدات
3. **محللات الملفات**: تحليل محتوى الملفات
4. **البرامج المساعدة**: أدوات النظام مثل `copy`, `size`, `compare`
5. **البرامج التجارية**: حفظ إعدادات المستخدم والبيانات

### تسلسل عمليات التعامل مع الملفات:

1. **فتح الملف** ← **التحقق من الفتح** ← **القراءة/الكتابة** ← **التعامل مع الأخطاء** ← **إغلاق الملف**
2. معظم الفئات تغلق الملفات تلقائياً عند الخروج من النطاق (باستخدام المدمرات)

هذا الفصل يغطي مهارة أساسية في البرمجة وهي التعامل مع التخزين الدائم للبيانات، مما يميز البرامج الحقيقية عن البرامج التعليمية البسيطة.