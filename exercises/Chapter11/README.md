# تمارين محلولة من الفصل الحادي عشر exercises/Chapter11 من كتاب Object-Oriented-Programming_OOP_C++

يحتوي هذا الفصل على تمارين برمجية من الكتاب من الفصل الحادي عشر (exercises/Chapter11) من كتاب Object-Oriented-Programming_OOP_C++.

---

## Chapter 11: Virtual Functions, Friends, and Advanced Class Design in C++

This chapter explores advanced Object-Oriented Programming concepts including virtual functions, polymorphism, friend functions and classes, copy constructors, and assignment operator overloading. These concepts enable more flexible and powerful class designs.

### Code Files:

| #   | File Name                                     | Description                                                                                             | Input         | Output        | Topic                    |
| --- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------- | ------------- | ------------------------ |
| 1   | [Exercises11_1.cpp](Exercises11_1.cpp)        | Demonstrates polymorphism using virtual functions with publication, book, and tape classes.            | بيانات كتب وأشرطة | معلومات مفصلة | الدوال الافتراضية، تعدد الأشكال |
| 2   | [Exercises11_2.cpp](Exercises11_2.cpp)        | Shows friend functions for operator overloading in the Distance class.                                 | قياسات مسافات | نتيجة الضرب   | دوال الصداقة، زيادة أحمال العوامل |
| 3   | [Exercises11_3.cpp](Exercises11_3.cpp)        | Implements a dynamic Array class with copy constructor and overloaded assignment operator.             | لا يوجد (ثوابت) | مصفوفة ومحتواها | منشئ النسخ، مشغل التعيين |
| 4   | [Exercises11_4.cpp](Exercises11_4.cpp)        | Creates a basic Array class with dynamic memory allocation and overloaded subscript operator.          | لا يوجد (ثوابت) | محتويات المصفوفة | الفئات الديناميكية، مشغل المجموعة الفرعية |

### تفاصيل كل تمرين:

#### 1. [Exercises11_1.cpp](Exercises11_1.cpp) - الدوال الافتراضية وتعدد الأشكال
- **الوظيفة**: تنفيذ تعدد الأشكال باستخدام دوال افتراضية في نظام إدارة المنشورات
- **المدخلات**: بيانات كتب وأشرطة من المستخدم
- **المخرجات**: عرض المعلومات المناسبة لكل نوع من المنشورات
- **المفاهيم**: 
  - الدوال الافتراضية (`virtual`) للربط المتأخر (late binding)
  - تعدد الأشكال (Polymorphism) - شكل واحد، سلوك متعدد
  - مصفوفات المؤشرات للفئة الأساسية (`publication* pubarr[100]`)
  - إنشاء كائنات ديناميكية (`new book`, `new tape`)
  - الربط الديناميكي (Dynamic Binding) في وقت التنفيذ

#### 2. [Exercises11_2.cpp](Exercises11_2.cpp) - دوال الصداقة لزيادة أحمال العوامل
- **الوظيفة**: استخدام دالة صديقة لزيادة حمل مشغل الضرب في فئة المسافة
- **المدخلات**: قياسات مسافات ثابتة في الكود
- **المخرجات**: نتيجة ضرب المسافتين
- **المفاهيم**:
  - دوال الصداقة (`friend`) للوصول للأعضاء الخاصة
  - زيادة حمل العوامل كدوال صديقة بدلاً من دوال أعضاء
  - التحويلات التلقائية (10.0 * dist3) باستخدام المنشئات
  - التعامل مع الوحدات المختلفة (أقدام وبوصات)

#### 3. [Exercises11_3.cpp](Exercises11_3.cpp) - منشئ النسخ ومشغل التعيين
- **الوظيفة**: تنفيذ فئة مصفوفة ديناميكية مع إدارة ذاكرة متكاملة
- **المدخلات**: ثوابت في الكود (مربعات الأعداد)
- **المخرجات**: عدة نسخ من المصفوفة بنفس المحتوى
- **المفاهيم**:
  - منشئ النسخ (Copy Constructor): `Array(Array&)`
  - زيادة حمل مشغل التعيين (Assignment Operator): `operator=`
  - مشكلة النسخ الضحلة (Shallow Copy) مقابل النسخ العميق (Deep Copy)
  - إرجاع المرجع (`return *this`) لتمكين التخصيص المتسلسل
  - مشغل المجموعة الفرعية (Subscript Operator): `operator[]`

#### 4. [Exercises11_4.cpp](Exercises11_4.cpp) - فئة مصفوفة ديناميكية أساسية
- **الوظيفة**: إنشاء فئة مصفوفة بسيطة مع ذاكرة ديناميكية
- **المدخلات**: ثوابت في الكود (مربعات الأعداد)
- **المخرجات**: محتويات المصفوفة
- **المفاهيم**:
  - تخصيص الذاكرة الديناميكية في المنشئ (`new int[s]`)
  - تحرير الذاكرة في المدمر (`delete[] ptr`)
  - زيادة حمل مشغل `[]` للوصول لعناصر المصفوفة
  - الفئات كغلاف (wrapper) للأنواع المضمنة

---

## الفصل الحادي عشر: الدوال الافتراضية، دوال الصداقة، وتصميم الفئات المتقدم في لغة C++

يستكشف هذا الفصل مفاهيم البرمجة الكائنية المتقدمة بما في ذلك الدوال الافتراضية، تعدد الأشكال، دوال وفئات الصداقة، منشئات النسخ، وزيادة أحمال مشغل التعيين. هذه المفاهيم تمكن من تصميم فئات أكثر مرونة وقوة.

### ملفات الأكواد:

| #   | اسم الملف                                     | الوصف                                                                                                   | المدخلات      | المخرجات       | الموضوع                    |
| --- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------- | ------------- | ------------------------ |
| 1   | [Exercises11_1.cpp](Exercises11_1.cpp)        | يوضح تعدد الأشكال باستخدام الدوال الافتراضية مع فئات النشر والكتاب والشريط.                             | بيانات كتب وأشرطة | معلومات مفصلة | الدوال الافتراضية، تعدد الأشكال |
| 2   | [Exercises11_2.cpp](Exercises11_2.cpp)        | يظهر دوال الصداقة لزيادة أحمال العوامل في فئة المسافة.                                                  | قياسات مسافات | نتيجة الضرب   | دوال الصداقة، زيادة أحمال العوامل |
| 3   | [Exercises11_3.cpp](Exercises11_3.cpp)        | ينفذ فئة مصفوفة ديناميكية مع منشئ نسخ ومشغل تعيين مزيد الحمل.                                          | لا يوجد (ثوابت) | مصفوفة ومحتواها | منشئ النسخ، مشغل التعيين |
| 4   | [Exercises11_4.cpp](Exercises11_4.cpp)        | ينشئ فئة مصفوفة أساسية مع تخصيص ذاكرة ديناميكية ومشغل مجموعة فرعية مزيد الحمل.                         | لا يوجد (ثوابت) | محتويات المصفوفة | الفئات الديناميكية، مشغل المجموعة الفرعية |

### شرح مفصل لكل تمرين:

#### 1. [Exercises11_1.cpp](Exercises11_1.cpp) - الدوال الافتراضية وتعدد الأشكال
- **ما يفعله البرنامج**: ينشئ نظاماً مرناً لإدارة أنواع مختلفة من المنشورات
- **كيف يعمل**: 
  1. يعرف فئة `publication` مع دوال `getdata()` و `putdata()` افتراضية
  2. ينشئ فئتي `book` و `tape` المشتقتين من `publication`
  3. يستخدم مصفوفة من مؤشرات `publication*` لتخزين أي نوع من المنشورات
  4. عند استدعاء `getdata()` أو `putdata()`، يتم استدعاء الدالة المناسبة للكائن الفعلي
  5. يسمح بإضافة أي عدد من الكتب والأشرطة بشكل تفاعلي
- **الغرض التعليمي**: فهم تعدد الأشكال وكيف تجعل النظام قابلاً للتوسيع بسهولة

#### 2. [Exercises11_2.cpp](Exercises11_2.cpp) - دوال الصداقة لزيادة أحمال العوامل
- **ما يفعله البرنامج**: يزيد حمل مشغل الضرب لفئة `Distance` كدالة صديقة
- **كيف يعمل**: 
  1. يعلن دالة `operator*` كصديقة للفئة `Distance`
  2. تأخذ الدالة معاملين من نوع `Distance` (بدلاً من معامل واحد في دوال الأعضاء)
  3. تحول كل مسافة إلى أقدام كسرية، تضربها، ثم تعيد مسافة جديدة
  4. يدعم الضرب بالتسلسل: `10.0 * dist3 * dist2`
- **الغرض التعليمي**: فهم متى وكيف تستخدم دوال الصداقة لزيادة أحمال العوامل

#### 3. [Exercises11_3.cpp](Exercises11_3.cpp) - منشئ النسخ ومشغل التعيين
- **ما يفعله البرنامج**: ينفذ فئة `Array` تدير ذاكرتها بشكل صحيح عند النسخ
- **كيف يعمل**: 
  1. ينفذ منشئ النسخ `Array(Array&)` الذي ينشئ نسخة عميقة (deep copy)
  2. ينفذ `operator=` الذي يحذف الذاكرة القديمة وينسخ الجديدة
  3. يضمن عدم مشاركة المؤشرات بين الكائنات المختلفة
  4. يدعم التخصيص المتسلسل: `arr4 = arr3 = arr1`
  5. يعيد `*this` لتمكين ذلك
- **الغرض التعليمي**: فهم إدارة الذاكرة في الفئات التي تحتوي على مؤشرات

#### 4. [Exercises11_4.cpp](Exercises11_4.cpp) - فئة مصفوفة ديناميكية أساسية
- **ما يفعله البرنامج**: ينشئ بديلاً للمصفوفات المضمنة في C++
- **كيف يعمل**: 
  1. يخصص ذاكرة ديناميكية في المنشئ بناءً على الحجم المطلوب
  2. يحمل مشغل `[]` للسماح بالوصول كالمصفوفات العادية: `arr[j]`
  3. يحرر الذاكرة في المدمر لمنع تسرب الذاكرة
  4. يعيد المرجع (`int&`) للسماح بالتعديل: `arr[j] = j*j`
- **الغرض التعليمي**: فهم كيفية بناء أنواع بيانات مخصصة بسلوك مشابه للأنواع المضمنة

### المفاهيم الرئيسية في هذا الفصل:

1. **الدوال الافتراضية (Virtual Functions)**:
   - `virtual` في الفئة الأساسية
   - الربط المتأخر (Late Binding) في وقت التنفيذ
   - ضرورية لتعدد الأشكال
2. **تعدد الأشكال (Polymorphism)**:
   - "أشكال متعددة"
   - كائنات مختلفة تستجيب بنفس الرسالة بطرق مختلفة
   - أساس البرمجة الموجهة بالواجهات
3. **دوال الصداقة (Friend Functions)**:
   - ليست دوال أعضاء ولكن يمكنها الوصول للأعضاء الخاصة
   - مفيدة عند زيادة حمل العوامل التي تحتاج معاملين
   - استخدام محدود للحفاظ على التغليف
4. **منشئ النسخ (Copy Constructor)**:
   - `ClassName(const ClassName&)`
   - يستدعى عند: `ClassName obj2 = obj1;`
   - مهم للفئات مع الذاكرة الديناميكية
5. **مشغل التعيين (Assignment Operator)**:
   - `ClassName& operator=(const ClassName&)`
   - يستدعى عند: `obj2 = obj1;`
   - يجب التعامل مع التخصيص الذاتي: `obj = obj;`

### قواعد الذاكرة (Rule of Three):
إذا كانت الفئة تحتاج أحد هذه الدوال، فغالباً تحتاج الثلاثة:
1. المدمر (Destructor) ← لتحرير الذاكرة
2. منشئ النسخ (Copy Constructor) ← لنسخ الذاكرة
3. مشغل التعيين (Assignment Operator) ← لتعيين الذاكرة

### فوائد تعدد الأشكال:
1. **إمكانية التوسيع**: إضافة فئات جديدة دون تعديل الكود الحالي
2. **الكود العام**: كتابة كود يعمل مع أنواع مختلفة
3. **الصيانة**: تغيير السلوك عن طريق تغيير الفئة فقط
4. **المرونة**: اختيار الفئة في وقت التنفيذ وليس الترجمة

### استخدامات دوال الصداقة:
1. **زيادة أحمال العوامل**: خاصة `<<` و `>>` للإدخال/الإخراج
2. **الوظائف المساعدة**: دوال تحتاج الوصول للبيانات الخاصة ولكن ليست جزءاً من الواجهة
3. **ربط الفئات**: عندما تحتاج فئتان للوصول المتبادل للبيانات الخاصة

هذا الفصل يوضح مفاهيم متقدمة تجعل البرمجة الكائنية أكثر قوة ومرونة، وهي أساسية لبناء أنظمة برمجية معقدة وقابلة للصيانة والتوسيع.